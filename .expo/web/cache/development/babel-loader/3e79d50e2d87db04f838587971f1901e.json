{"ast":null,"code":"'use strict';\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nvar PixelRatio = require(\"../Utilities/PixelRatio\");\n\nvar Platform = require(\"../Utilities/Platform\");\n\nvar _require = require(\"./AssetUtils\"),\n    pickScale = _require.pickScale;\n\nvar _require2 = require('@react-native/assets/path-support'),\n    getAndroidResourceFolderName = _require2.getAndroidResourceFolderName,\n    getAndroidResourceIdentifier = _require2.getAndroidResourceIdentifier,\n    getBasePath = _require2.getBasePath;\n\nvar invariant = require('invariant');\n\nfunction getScaledAssetPath(asset) {\n  var scale = pickScale(asset.scales, PixelRatio.get());\n  var scaleSuffix = scale === 1 ? '' : '@' + scale + 'x';\n  var assetDir = getBasePath(asset);\n  return assetDir + '/' + asset.name + scaleSuffix + '.' + asset.type;\n}\n\nfunction getAssetPathInDrawableFolder(asset) {\n  var scale = pickScale(asset.scales, PixelRatio.get());\n  var drawableFolder = getAndroidResourceFolderName(asset, scale);\n  var fileName = getAndroidResourceIdentifier(asset);\n  return drawableFolder + '/' + fileName + '.' + asset.type;\n}\n\nvar AssetSourceResolver = function () {\n  function AssetSourceResolver(serverUrl, jsbundleUrl, asset) {\n    _classCallCheck(this, AssetSourceResolver);\n\n    this.serverUrl = serverUrl;\n    this.jsbundleUrl = jsbundleUrl;\n    this.asset = asset;\n  }\n\n  _createClass(AssetSourceResolver, [{\n    key: \"isLoadedFromServer\",\n    value: function isLoadedFromServer() {\n      return !!this.serverUrl;\n    }\n  }, {\n    key: \"isLoadedFromFileSystem\",\n    value: function isLoadedFromFileSystem() {\n      return !!(this.jsbundleUrl && this.jsbundleUrl.startsWith('file://'));\n    }\n  }, {\n    key: \"defaultAsset\",\n    value: function defaultAsset() {\n      if (this.isLoadedFromServer()) {\n        return this.assetServerURL();\n      }\n\n      if (Platform.OS === 'android') {\n        return this.isLoadedFromFileSystem() ? this.drawableFolderInBundle() : this.resourceIdentifierWithoutScale();\n      } else {\n        return this.scaledAssetURLNearBundle();\n      }\n    }\n  }, {\n    key: \"assetServerURL\",\n    value: function assetServerURL() {\n      invariant(!!this.serverUrl, 'need server to load from');\n      return this.fromSource(this.serverUrl + getScaledAssetPath(this.asset) + '?platform=' + Platform.OS + '&hash=' + this.asset.hash);\n    }\n  }, {\n    key: \"scaledAssetPath\",\n    value: function scaledAssetPath() {\n      return this.fromSource(getScaledAssetPath(this.asset));\n    }\n  }, {\n    key: \"scaledAssetURLNearBundle\",\n    value: function scaledAssetURLNearBundle() {\n      var path = this.jsbundleUrl || 'file://';\n      return this.fromSource(path + getScaledAssetPath(this.asset).replace(/\\.\\.\\//g, '_'));\n    }\n  }, {\n    key: \"resourceIdentifierWithoutScale\",\n    value: function resourceIdentifierWithoutScale() {\n      invariant(Platform.OS === 'android', 'resource identifiers work on Android');\n      return this.fromSource(getAndroidResourceIdentifier(this.asset));\n    }\n  }, {\n    key: \"drawableFolderInBundle\",\n    value: function drawableFolderInBundle() {\n      var path = this.jsbundleUrl || 'file://';\n      return this.fromSource(path + getAssetPathInDrawableFolder(this.asset));\n    }\n  }, {\n    key: \"fromSource\",\n    value: function fromSource(source) {\n      return {\n        __packager_asset: true,\n        width: this.asset.width,\n        height: this.asset.height,\n        uri: source,\n        scale: pickScale(this.asset.scales, PixelRatio.get())\n      };\n    }\n  }]);\n\n  return AssetSourceResolver;\n}();\n\nAssetSourceResolver.pickScale = pickScale;\nmodule.exports = AssetSourceResolver;","map":{"version":3,"names":["PixelRatio","require","Platform","pickScale","getAndroidResourceFolderName","getAndroidResourceIdentifier","getBasePath","invariant","getScaledAssetPath","asset","scale","scales","get","scaleSuffix","assetDir","name","type","getAssetPathInDrawableFolder","drawableFolder","fileName","AssetSourceResolver","serverUrl","jsbundleUrl","startsWith","isLoadedFromServer","assetServerURL","OS","isLoadedFromFileSystem","drawableFolderInBundle","resourceIdentifierWithoutScale","scaledAssetURLNearBundle","fromSource","hash","path","replace","source","__packager_asset","width","height","uri","module","exports"],"sources":["/Users/zagarellagabriele/Desktop/Progetti/React Native/React-Native-Exercises/node_modules/react-native/Libraries/Image/AssetSourceResolver.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n * @format\n */\n\n'use strict';\n\nexport type ResolvedAssetSource = {|\n  +__packager_asset: boolean,\n  +width: ?number,\n  +height: ?number,\n  +uri: string,\n  +scale: number,\n|};\n\nimport type {PackagerAsset} from '@react-native/assets/registry';\n\nconst PixelRatio = require('../Utilities/PixelRatio');\nconst Platform = require('../Utilities/Platform');\nconst {pickScale} = require('./AssetUtils');\nconst {\n  getAndroidResourceFolderName,\n  getAndroidResourceIdentifier,\n  getBasePath,\n} = require('@react-native/assets/path-support');\nconst invariant = require('invariant');\n\n/**\n * Returns a path like 'assets/AwesomeModule/icon@2x.png'\n */\nfunction getScaledAssetPath(asset: PackagerAsset): string {\n  const scale = pickScale(asset.scales, PixelRatio.get());\n  const scaleSuffix = scale === 1 ? '' : '@' + scale + 'x';\n  const assetDir = getBasePath(asset);\n  return assetDir + '/' + asset.name + scaleSuffix + '.' + asset.type;\n}\n\n/**\n * Returns a path like 'drawable-mdpi/icon.png'\n */\nfunction getAssetPathInDrawableFolder(asset: PackagerAsset): string {\n  const scale = pickScale(asset.scales, PixelRatio.get());\n  const drawableFolder = getAndroidResourceFolderName(asset, scale);\n  const fileName = getAndroidResourceIdentifier(asset);\n  return drawableFolder + '/' + fileName + '.' + asset.type;\n}\n\nclass AssetSourceResolver {\n  serverUrl: ?string;\n  // where the jsbundle is being run from\n  jsbundleUrl: ?string;\n  // the asset to resolve\n  asset: PackagerAsset;\n\n  constructor(serverUrl: ?string, jsbundleUrl: ?string, asset: PackagerAsset) {\n    this.serverUrl = serverUrl;\n    this.jsbundleUrl = jsbundleUrl;\n    this.asset = asset;\n  }\n\n  isLoadedFromServer(): boolean {\n    return !!this.serverUrl;\n  }\n\n  isLoadedFromFileSystem(): boolean {\n    return !!(this.jsbundleUrl && this.jsbundleUrl.startsWith('file://'));\n  }\n\n  defaultAsset(): ResolvedAssetSource {\n    if (this.isLoadedFromServer()) {\n      return this.assetServerURL();\n    }\n\n    if (Platform.OS === 'android') {\n      return this.isLoadedFromFileSystem()\n        ? this.drawableFolderInBundle()\n        : this.resourceIdentifierWithoutScale();\n    } else {\n      return this.scaledAssetURLNearBundle();\n    }\n  }\n\n  /**\n   * Returns an absolute URL which can be used to fetch the asset\n   * from the devserver\n   */\n  assetServerURL(): ResolvedAssetSource {\n    invariant(!!this.serverUrl, 'need server to load from');\n    return this.fromSource(\n      this.serverUrl +\n        getScaledAssetPath(this.asset) +\n        '?platform=' +\n        Platform.OS +\n        '&hash=' +\n        this.asset.hash,\n    );\n  }\n\n  /**\n   * Resolves to just the scaled asset filename\n   * E.g. 'assets/AwesomeModule/icon@2x.png'\n   */\n  scaledAssetPath(): ResolvedAssetSource {\n    return this.fromSource(getScaledAssetPath(this.asset));\n  }\n\n  /**\n   * Resolves to where the bundle is running from, with a scaled asset filename\n   * E.g. 'file:///sdcard/bundle/assets/AwesomeModule/icon@2x.png'\n   */\n  scaledAssetURLNearBundle(): ResolvedAssetSource {\n    const path = this.jsbundleUrl || 'file://';\n    return this.fromSource(\n      // Assets can have relative paths outside of the project root.\n      // When bundling them we replace `../` with `_` to make sure they\n      // don't end up outside of the expected assets directory.\n      path + getScaledAssetPath(this.asset).replace(/\\.\\.\\//g, '_'),\n    );\n  }\n\n  /**\n   * The default location of assets bundled with the app, located by\n   * resource identifier\n   * The Android resource system picks the correct scale.\n   * E.g. 'assets_awesomemodule_icon'\n   */\n  resourceIdentifierWithoutScale(): ResolvedAssetSource {\n    invariant(\n      Platform.OS === 'android',\n      'resource identifiers work on Android',\n    );\n    return this.fromSource(getAndroidResourceIdentifier(this.asset));\n  }\n\n  /**\n   * If the jsbundle is running from a sideload location, this resolves assets\n   * relative to its location\n   * E.g. 'file:///sdcard/AwesomeModule/drawable-mdpi/icon.png'\n   */\n  drawableFolderInBundle(): ResolvedAssetSource {\n    const path = this.jsbundleUrl || 'file://';\n    return this.fromSource(path + getAssetPathInDrawableFolder(this.asset));\n  }\n\n  fromSource(source: string): ResolvedAssetSource {\n    return {\n      __packager_asset: true,\n      width: this.asset.width,\n      height: this.asset.height,\n      uri: source,\n      scale: pickScale(this.asset.scales, PixelRatio.get()),\n    };\n  }\n\n  static pickScale: (scales: Array<number>, deviceScale?: number) => number =\n    pickScale;\n}\n\nmodule.exports = AssetSourceResolver;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}