{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { UnavailabilityError } from 'expo-modules-core';\nimport { useEffect } from 'react';\nimport ExpoKeepAwake from \"./ExpoKeepAwake\";\nexport var ExpoKeepAwakeTag = 'ExpoKeepAwakeDefaultTag';\nexport function isAvailableAsync() {\n  return _regeneratorRuntime.async(function isAvailableAsync$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if (!ExpoKeepAwake.isAvailableAsync) {\n            _context.next = 4;\n            break;\n          }\n\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(ExpoKeepAwake.isAvailableAsync());\n\n        case 3:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 4:\n          return _context.abrupt(\"return\", true);\n\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function useKeepAwake() {\n  var tag = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ExpoKeepAwakeTag;\n  var options = arguments.length > 1 ? arguments[1] : undefined;\n  useEffect(function () {\n    var isMounted = true;\n    activateKeepAwakeAsync(tag).then(function () {\n      if (isMounted && ExpoKeepAwake.addListenerForTag && options != null && options.listener) {\n        addListener(tag, options.listener);\n      }\n    });\n    return function () {\n      isMounted = false;\n\n      if (options != null && options.suppressDeactivateWarnings) {\n        deactivateKeepAwake(tag).catch(function () {});\n      } else {\n        deactivateKeepAwake(tag);\n      }\n    };\n  }, [tag]);\n}\nexport function activateKeepAwake() {\n  var tag = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ExpoKeepAwakeTag;\n  console.warn('`activateKeepAwake` is deprecated. Use `activateKeepAwakeAsync` instead.');\n  return activateKeepAwakeAsync(tag);\n}\nexport function activateKeepAwakeAsync() {\n  var tag,\n      _args2 = arguments;\n  return _regeneratorRuntime.async(function activateKeepAwakeAsync$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          tag = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : ExpoKeepAwakeTag;\n          _context2.next = 3;\n          return _regeneratorRuntime.awrap(ExpoKeepAwake.activate == null ? void 0 : ExpoKeepAwake.activate(tag));\n\n        case 3:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function deactivateKeepAwake() {\n  var tag,\n      _args3 = arguments;\n  return _regeneratorRuntime.async(function deactivateKeepAwake$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          tag = _args3.length > 0 && _args3[0] !== undefined ? _args3[0] : ExpoKeepAwakeTag;\n          _context3.next = 3;\n          return _regeneratorRuntime.awrap(ExpoKeepAwake.deactivate == null ? void 0 : ExpoKeepAwake.deactivate(tag));\n\n        case 3:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function addListener(tagOrListener, listener) {\n  if (!ExpoKeepAwake.addListenerForTag) {\n    throw new UnavailabilityError('ExpoKeepAwake', 'addListenerForTag');\n  }\n\n  var tag = typeof tagOrListener === 'string' ? tagOrListener : ExpoKeepAwakeTag;\n\n  var _listener = typeof tagOrListener === 'function' ? tagOrListener : listener;\n\n  return ExpoKeepAwake.addListenerForTag(tag, _listener);\n}\nexport * from \"./KeepAwake.types\";","map":{"version":3,"sources":["../src/index.ts"],"names":[],"mappings":";AAAA,SAAuB,mBAAvB,QAAkD,mBAAlD;AACA,SAAS,SAAT,QAA0B,OAA1B;AAEA,OAAO,aAAP;AAIA,OAAO,IAAM,gBAAgB,GAAG,yBAAzB;AAGP,OAAO,SAAe,gBAAf;EAAA;IAAA;MAAA;QAAA;UAAA,KACD,aAAa,CAAC,gBADb;YAAA;YAAA;UAAA;;UAAA;UAAA,iCAEU,aAAa,CAAC,gBAAd,EAFV;;QAAA;UAAA;;QAAA;UAAA,iCAIE,IAJF;;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA;AAgBP,OAAM,SAAU,YAAV,GAAiF;EAAA,IAA1D,GAA0D,uEAA5C,gBAA4C;EAAA,IAA1B,OAA0B;EACrF,SAAS,CAAC,YAAK;IACb,IAAI,SAAS,GAAG,IAAhB;IACA,sBAAsB,CAAC,GAAD,CAAtB,CAA4B,IAA5B,CAAiC,YAAK;MACpC,IAAI,SAAS,IAAI,aAAa,CAAC,iBAA3B,IAAgD,OAAhD,YAAgD,OAAO,CAAE,QAA7D,EAAuE;QACrE,WAAW,CAAC,GAAD,EAAM,OAAO,CAAC,QAAd,CAAX;MACD;IACF,CAJD;IAKA,OAAO,YAAK;MACV,SAAS,GAAG,KAAZ;;MACA,IAAI,OAAJ,YAAI,OAAO,CAAE,0BAAb,EAAyC;QACvC,mBAAmB,CAAC,GAAD,CAAnB,CAAyB,KAAzB,CAA+B,YAAK,CAAG,CAAvC;MACD,CAFD,MAEO;QACL,mBAAmB,CAAC,GAAD,CAAnB;MACD;IACF,CAPD;EAQD,CAfQ,EAeN,CAAC,GAAD,CAfM,CAAT;AAgBD;AAeD,OAAM,SAAU,iBAAV,GAA0D;EAAA,IAA9B,GAA8B,uEAAhB,gBAAgB;EAC9D,OAAO,CAAC,IAAR,CAAa,0EAAb;EACA,OAAO,sBAAsB,CAAC,GAAD,CAA7B;AACD;AAcD,OAAO,SAAe,sBAAf;EAAA;EAAA;EAAA;IAAA;MAAA;QAAA;UAAsC,GAAtC,8DAAoD,gBAApD;UAAA;UAAA,iCACC,aAAa,CAAC,QADf,oBACC,aAAa,CAAC,QAAd,CAAyB,GAAzB,CADD;;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA;AAYP,OAAO,SAAe,mBAAf;EAAA;EAAA;EAAA;IAAA;MAAA;QAAA;UAAmC,GAAnC,8DAAiD,gBAAjD;UAAA;UAAA,iCACC,aAAa,CAAC,UADf,oBACC,aAAa,CAAC,UAAd,CAA2B,GAA3B,CADD;;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA;AAgBP,OAAM,SAAU,WAAV,CACJ,aADI,EAEJ,QAFI,EAEwB;EAG5B,IAAI,CAAC,aAAa,CAAC,iBAAnB,EAAsC;IACpC,MAAM,IAAI,mBAAJ,CAAwB,eAAxB,EAAyC,mBAAzC,CAAN;EACD;;EAED,IAAM,GAAG,GAAG,OAAO,aAAP,KAAyB,QAAzB,GAAoC,aAApC,GAAoD,gBAAhE;;EACA,IAAM,SAAS,GAAG,OAAO,aAAP,KAAyB,UAAzB,GAAsC,aAAtC,GAAsD,QAAxE;;EAEA,OAAO,aAAa,CAAC,iBAAd,CAAgC,GAAhC,EAAqC,SAArC,CAAP;AACD;AAED","sourcesContent":["import { Subscription, UnavailabilityError } from 'expo-modules-core';\nimport { useEffect } from 'react';\n\nimport ExpoKeepAwake from './ExpoKeepAwake';\nimport { KeepAwakeListener, KeepAwakeOptions } from './KeepAwake.types';\n\n/** Default tag, used when no tag has been specified in keep awake method calls. */\nexport const ExpoKeepAwakeTag = 'ExpoKeepAwakeDefaultTag';\n\n/** @returns `true` on all platforms except [unsupported web browsers](https://caniuse.com/wake-lock). */\nexport async function isAvailableAsync(): Promise<boolean> {\n  if (ExpoKeepAwake.isAvailableAsync) {\n    return await ExpoKeepAwake.isAvailableAsync();\n  }\n  return true;\n}\n\n/**\n * A React hook to keep the screen awake for as long as the owner component is mounted.\n * The optionally provided `tag` argument is used when activating and deactivating the keep-awake\n * feature. If unspecified, the default `tag` is used. See the documentation for `activateKeepAwakeAsync`\n * below to learn more about the `tag` argument.\n *\n * @param tag Tag to lock screen sleep prevention. If not provided, the default tag is used.\n * @param options Additional options for the keep awake hook.\n */\nexport function useKeepAwake(tag: string = ExpoKeepAwakeTag, options?: KeepAwakeOptions): void {\n  useEffect(() => {\n    let isMounted = true;\n    activateKeepAwakeAsync(tag).then(() => {\n      if (isMounted && ExpoKeepAwake.addListenerForTag && options?.listener) {\n        addListener(tag, options.listener);\n      }\n    });\n    return () => {\n      isMounted = false;\n      if (options?.suppressDeactivateWarnings) {\n        deactivateKeepAwake(tag).catch(() => {});\n      } else {\n        deactivateKeepAwake(tag);\n      }\n    };\n  }, [tag]);\n}\n\n// @needsAudit\n/**\n * Prevents the screen from sleeping until `deactivateKeepAwake` is called with the same `tag` value.\n *\n * If the `tag` argument is specified, the screen will not sleep until you call `deactivateKeepAwake`\n * with the same `tag` argument. When using multiple `tags` for activation you'll have to deactivate\n * each one in order to re-enable screen sleep. If tag is unspecified, the default `tag` is used.\n *\n * Web support [is limited](https://caniuse.com/wake-lock).\n *\n * @param tag Tag to lock screen sleep prevention. If not provided, the default tag is used.\n * @deprecated use `activateKeepAwakeAsync` instead.\n */\nexport function activateKeepAwake(tag: string = ExpoKeepAwakeTag): Promise<void> {\n  console.warn('`activateKeepAwake` is deprecated. Use `activateKeepAwakeAsync` instead.');\n  return activateKeepAwakeAsync(tag);\n}\n\n// @needsAudit\n/**\n * Prevents the screen from sleeping until `deactivateKeepAwake` is called with the same `tag` value.\n *\n * If the `tag` argument is specified, the screen will not sleep until you call `deactivateKeepAwake`\n * with the same `tag` argument. When using multiple `tags` for activation you'll have to deactivate\n * each one in order to re-enable screen sleep. If tag is unspecified, the default `tag` is used.\n *\n * Web support [is limited](https://caniuse.com/wake-lock).\n *\n * @param tag Tag to lock screen sleep prevention. If not provided, the default tag is used.\n */\nexport async function activateKeepAwakeAsync(tag: string = ExpoKeepAwakeTag): Promise<void> {\n  await ExpoKeepAwake.activate?.(tag);\n}\n\n// @needsAudit\n/**\n * Releases the lock on screen-sleep prevention associated with the given `tag` value. If `tag`\n * is unspecified, it defaults to the same default tag that `activateKeepAwake` uses.\n *\n * @param tag Tag to release the lock on screen sleep prevention. If not provided,\n * the default tag is used.\n */\nexport async function deactivateKeepAwake(tag: string = ExpoKeepAwakeTag): Promise<void> {\n  await ExpoKeepAwake.deactivate?.(tag);\n}\n\n/**\n * Observe changes to the keep awake timer.\n * On web, this changes when navigating away from the active window/tab. No-op on native.\n * @platform web\n *\n * @example\n * ```ts\n * KeepAwake.addListener(({ state }) => {\n *   // ...\n * });\n * ```\n */\nexport function addListener(\n  tagOrListener: string | KeepAwakeListener,\n  listener?: KeepAwakeListener\n): Subscription {\n  // Assert so the type is non-nullable.\n  if (!ExpoKeepAwake.addListenerForTag) {\n    throw new UnavailabilityError('ExpoKeepAwake', 'addListenerForTag');\n  }\n\n  const tag = typeof tagOrListener === 'string' ? tagOrListener : ExpoKeepAwakeTag;\n  const _listener = typeof tagOrListener === 'function' ? tagOrListener : listener;\n\n  return ExpoKeepAwake.addListenerForTag(tag, _listener);\n}\n\nexport * from './KeepAwake.types';\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}